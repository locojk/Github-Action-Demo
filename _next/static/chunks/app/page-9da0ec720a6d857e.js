(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{208:(t,e,o)=>{Promise.resolve().then(o.bind(o,4791))},4791:(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>x});var a=o(4650),s=o(3064);let n=t=>{let e;let o=new Set,a=(t,a)=>{let s="function"==typeof t?t(e):t;if(!Object.is(s,e)){let t=e;e=(null!=a?a:"object"!=typeof s||null===s)?s:Object.assign({},e,s),o.forEach(o=>o(e,t))}},s=()=>e,n={setState:a,getState:s,getInitialState:()=>c,subscribe:t=>(o.add(t),()=>o.delete(t))},c=e=t(a,s,n);return n},c=t=>t?n(t):n,r=t=>t,d=t=>{let e=c(t),o=t=>(function(t,e=r){let o=s.useSyncExternalStore(t.subscribe,()=>e(t.getState()),()=>e(t.getInitialState()));return s.useDebugValue(o),o})(e,t);return Object.assign(o,e),o};var l=o(8970);let i=l.env.NEXT_PUBLIC_VERCEL_URL?"https://".concat(l.env.NEXT_PUBLIC_VERCEL_URL,"/api"):"http://localhost:3000/api",u=(t=>t?d(t):d)(t=>({todos:[],fetchTodos:async()=>{try{let e=await fetch("".concat(i,"/todos")),o=await e.json();t({todos:o})}catch(t){console.error("Error fetching todos:",t)}},addTodo:async e=>{try{let o=await fetch("".concat(i,"/todos"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await o.json();t(t=>({todos:[...t.todos,a]}))}catch(t){console.error("Error creating todo:",t)}},updateTodo:async e=>{try{let o=await fetch("".concat(i,"/todos/").concat(e.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await o.json();t(t=>({todos:t.todos.map(t=>t.id===a.id?a:t)}))}catch(t){console.error("Error updating todo:",t)}},deleteTodo:async e=>{try{await fetch("".concat(i,"/todos/").concat(e),{method:"DELETE"}),t(t=>({todos:t.todos.filter(t=>t.id!==e)}))}catch(t){console.error("Error deleting todo:",t)}}}));function h(){let t=u(t=>t.addTodo),[e,o]=(0,s.useState)(!1),[n,c]=(0,s.useState)(""),r=async()=>{if(0===n.length)return alert("Todo input must not be empty");try{o(!0),await t({title:n}),c("")}catch(t){console.error("Error creating todo item:",t)}finally{o(!1)}};return(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,a.jsx)("input",{type:"text",value:n,onChange:t=>c(t.target.value),className:"border rounded px-2 py-1 flex-1"}),(0,a.jsx)("button",{disabled:e,className:"px-2 py-1 text-white rounded ".concat(e?"bg-gray-400":"bg-green-500"),onClick:r,children:"Add"})]})}let p=t=>{let{todo:e}=t,[o,n]=(0,s.useState)(!1),c=u(t=>t.updateTodo),r=u(t=>t.deleteTodo);return(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsx)("span",{className:"text-gray-700 flex-1 ".concat(e.completed?"line-through":""),onClick:()=>{n(!0),c({...e,completed:!e.completed}),n(!1)},children:e.title}),(0,a.jsx)("button",{disabled:o,className:"px-2 py-1 text-white rounded ".concat(o?"bg-gray-400":"bg-red-500"),onClick:()=>{n(!0),r(e.id),n(!1)},children:"Delete"})]})},x=()=>{let t=u(t=>t.todos),e=u(t=>t.fetchTodos);return(0,s.useEffect)(()=>{e()},[]),(0,a.jsxs)("div",{className:"container mx-auto max-w-md p-4",children:[(0,a.jsx)(h,{}),(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Todo List"}),0===t.length?(0,a.jsx)("p",{className:"text-center",children:"No Todos Found"}):t.map(t=>(0,a.jsx)(p,{todo:t},t.id))]})}}},t=>{var e=e=>t(t.s=e);t.O(0,[947,170,744],()=>e(208)),_N_E=t.O()}]);